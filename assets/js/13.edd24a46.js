(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{367:function(t,s,a){"use strict";a.r(s);var n=a(42),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"sftp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sftp"}},[t._v("#")]),t._v(" sftp")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" -V\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("groupadd")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sftp")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useradd")]),t._v(" -g "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sftp")]),t._v(" -s /sbin/nologin -d / ftpthy    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -d设置登入目录")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("passwd")]),t._v(" ftpthy\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/ssh/sshd_config    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Subsystem 改为 Subsystem sftp internal-sftp -u 0002")]),t._v("\nsystemctl restart sshd\n")])])]),a("p",[t._v("如果需要限制访问目录，执行以下两步")]),t._v(" "),a("ul",[a("li",[t._v("1.设置用户登入目录：")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /home/sftp/ftpthy   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# useradd 时设置登入目录")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R ftpthy:sftp /home/sftp/ftpthy  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置文件夹拥有者")]),t._v("\n")])])]),a("ul",[a("li",[t._v("2.限制用户访问目录：")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Match User ftpuser\nChrootDirectory /home/sftp\nForceCommand    internal-sftp\n")])])]),a("p",[t._v("目录权限注意事项：\n由ChrootDirectory指定的目录开始一直往上到系统根目录为止的目录拥有者都只能是root\n由ChrootDirectory指定的目录开始一直往上到系统根目录为止都不可以具有群组写入权限\nchmod -R 544 /home/sftp/ftpthy")])])}),[],!1,null,null,null);s.default=e.exports}}]);